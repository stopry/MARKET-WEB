$(function () {
    //头部商品切换
    $(".greenItemWrap .greemItem").click(function () {
       $(this).addClass('active').siblings('.greemItem').removeClass('active');
    });
    //卖三买三切换显示
    $(".dgtTableWrap .dgtOpenBtn").click(function () {
       $(this).toggleClass('close');
       $(".dgtTableWrap").toggleClass('close');
    });
    //图标标签切换
    $(".chartChange .chartBtn").click(function () {
       $(this).addClass('seled').siblings('.chartBtn').removeClass('seled');
    });
    //涨跌信息显示隐藏
    $(".fdWrap").click(function () {
        $(".dfInfo").toggleClass('active');
        $(".xsjIcon").toggleClass('active');
    });
    //显示/关闭委托订单弹框
    function showDlgBox(bool) {
        if(bool){
            $('.dgtOrderBox').addClass('active');
            showLayerBlack(true);
        }else{
            $('.dgtOrderBox').removeClass('active');
            showLayerBlack(false);
        }
    }
    //显示委托订单弹框
    $('.oprBtnWrap .dlgOrder').click(function () {
        showDlgBox(1);
    });
    //关闭委托订单弹框
    $('.dgtOrderBox .closeBtn').click(function () {
        showDlgBox(!1);
    })
    //显示购买弹框
    function showBuyBox() {
        showLayerBlack(1);
        $(".marketBuyBoxObj").addClass('active');
    }
    //关闭购买弹框
    function closeBuyBox() {
        showLayerBlack(!1);
        $(".marketBuyBoxObj").removeClass('active');
    }
    $('.oprBtn.saleBtn').click(function () {
        showBuyBox();
    });
    $(".marketBuyBoxObj .closeIcon").click(function () {
        closeBuyBox();
    });
    //显示卖出弹框
    function showSaleBox() {
        showLayerBlack(1);
        $(".marketSaleBox").addClass('active');
    }
    //关闭卖出弹框
    function closeSaleBox() {
        showLayerBlack(!1);
        $(".marketSaleBox").removeClass('active');
    }
    $('.oprBtn.buyBtn').click(function () {
        showSaleBox();
    });
    $(".marketSaleBox .closeIcon").click(function () {
        closeSaleBox();
    });
    //买入框买入量选择
    $(".marketBuyBoxObj .selPerArea .item").click(function () {
        $(this).addClass('active').siblings('.item').removeClass('active');
    });
    //卖出框买入量选择
    $(".marketSaleBox .selPerArea .item").click(function () {
        $(this).addClass('active').siblings('.item').removeClass('active');
    });
    //委托订单点击撤销
    $(document).on('click','.entOrderTable tr .canelBtn',function () {
       showConDia('确认撤销此订单吗?',function () {
           showTips('撤销成功','success');
       },function () {

       });
    });
    //买入卖出点击效果
    $(document).on('click','.marketSaleBox .fiveTable tr',function (e) {
        var _html = $(this).find('td:nth-child(2)').html();

        var tagetPos = {
            x:"2.5rem",
            y:"4.21875rem"
        };
        $('.marketSaleBox .aniText').show();

        var px = e.pageX;
        var py = e.pageY;

        var ww = $(window).width();
        var wh = $(window).height();

        var ox;
        var oy;

        if(isPc()){
            ox = 600-(ww-px)+150+'px';
            oy = (wh-py-30)/60+'rem';
        }else{
            ox = ww-(ww-px)/0.8+'px';
            oy = (wh-py)/1.1+'px';
        }

        $('.marketSaleBox .aniText').html(_html);
        $('.marketSaleBox .aniText').css({
            bottom:oy,
            left:ox,
            opacity:1
        });

        $('.marketSaleBox .aniText').stop().animate({
            bottom:tagetPos.y,
            left:tagetPos.x,
            opacity:0.6
        },800,function () {
            $('.marketSaleBox .aniText').hide();
        });

        console.log(ox,oy);

    });
    $(document).on('click','.marketBuyBoxObj .fiveTable tr',function (e) {
        var _html = $(this).find('td:nth-child(2)').html();

        var tagetPos = {
            x:"2.5rem",
            y:"4.21875rem"
        };
        $('.marketBuyBoxObj .aniText').show();

        var px = e.pageX;
        var py = e.pageY;

        var ww = $(window).width();
        var wh = $(window).height();

        var ox;
        var oy;

        if(isPc()){
            ox = 600-(ww-px)+150+'px';
            oy = (wh-py-30)/60+'rem';
        }else{
            ox = ww-(ww-px)/0.8+'px';
            oy = (wh-py)/1.1+'px';
        }

        $('.marketBuyBoxObj .aniText').html(_html);
        $('.marketBuyBoxObj .aniText').css({
            bottom:oy,
            left:ox,
            opacity:1
        });

        $('.marketBuyBoxObj .aniText').stop().animate({
            bottom:tagetPos.y,
            left:tagetPos.x,
            opacity:0.6
        },800,function () {
            $('.marketBuyBoxObj .aniText').hide();
        });


    });
});